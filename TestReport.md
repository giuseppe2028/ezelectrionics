# Test Report

<The goal of this document is to explain how the application was tested, detailing how the test cases were defined and what they cover>

# Contents

- [Test Report](#test-report)
- [Contents](#contents)
- [Dependency graph](#dependency-graph)
- [Integration approach](#integration-approach)
    - [Step 1: Test di unità](#step-1-test-di-unità)
    - [Step 2: Test di integrazione principali](#step-2-test-di-integrazione-principali)
    - [Step 3: Test di integrazione secondari](#step-3-test-di-integrazione-secondari)
    - [Step 4: Test di Sistema e di API](#step-4-test-di-sistema-e-di-api)
- [Tests](#tests)
- [Coverage](#coverage)
  - [Coverage of FR](#coverage-of-fr)
  - [Functional Requirements Coverage](#functional-requirements-coverage)
  - [Coverage white box](#coverage-white-box)

# Dependency graph

![dependency_graph.png](assets/dependency_graph.png)

# Integration approach

L'approccio principale utilizzato per il testing del software ezelectronics è stato basato su una tecnica bottom-up. 
Questa scelta ha permesso di testare modularmente a partire dai livelli più bassi il codice sviluppato, e rintracciare in modo sequenziale e efficace eventuali errori.
Per questo motivo abbiamo testato prima i moduli indipendenti per poi procedere verso quelli dipendenti fino a testare il sistema nel suo complesso. <br>
I test di unità sono stati effettuati sui singoli moduli per verificarne la corretta funzionalità. <br>
I test di integrazione sono stati svolti tramite chiamate sequenziali alle route delle unità da integrare, testando a cascata i vari test cases e scenari legati ai seguenti moduli funzionali: <br>

 - routes -> controllers -> dao.

La sequenza di integrazione dei test è stata sviluppata secondo la seguente logica di elaborazione:

### Step 1: Test di unità

- Test di unità degli utenti (Unit A): Test delle funzionalità dei singoli moduli di creazione, autenticazione, visualizzazione, e cancellazione degli utenti

- Test di unità dei prodotti (Unit B): Test delle funzionalità dei singoli moduli di creazione, visializzazione, aggiornamento, vendita e cancellazione dei prodotti

- Test di unità dei carrelli (Unit C): Test delle funzionalità dei singoli moduli di creazione, visualizzazione, aggiornamento, checkout e cancellazione dei carrelli

- Test di unità delle recensioni (Unit D): Test delle funzionalità dei singoli moduli di creazione, visualizzazione e cancellazione delle recensioni
    
### Step 2: Test di integrazione principali

- Test utenti e prodotti (Unit A + Unit B): Test di integrazione delle funzionalità utente e dei prodotti per creare, visualizzare, aggiornare, vendere e cancellare prodotti in funzione dei ruoli e dei permessi di ogni utente

- Test utenti e carrelli (Unit A + Unit C): Test di integrazione delle funzionalità utente e dei carrelli per visualizzare e cancellare i carrelli in funzione dei ruoli e dei permessi utente

### Step 3: Test di integrazione secondari

- Test Utenti, Prodotti e Carrelli (Unit A + Unit B + Unit C): Test di integrazione per verificare le funzionalità di inserimento, rimozione, cancellazione e checkout dei prodotti in un carrello da parte di un utente in relazione ai ruoli e permessi di ogni utente

- Test Utenti, Prodotti, Recensioni (Unit A + Unit B + Unit D): Test di integrazione per verificare le funzionalità di inserimento e cancellazione di recensioni riferite a prodotti in relazione ai ruoli e permessi di ogni utente

### Step 4: Test di Sistema e di API

- Test Utenti, Prodotti, Carrelli e Recensioni (All Units): Test del sistema complessivo con l'ausilio dell'interfaccia utente per verificare le funzionalità complessive di ogni unità in funzione di ruoli e permessi di ogni utente

# Tests


|                  Test case name                  |              Object(s) tested              | Test level  |                                         Technique used                                          |
|:------------------------------------------------:|:------------------------------------------:|:-----------:|:-----------------------------------------------------------------------------------------------:|
|         POST /users - Create a new User          |     userRoutes,userDao,userController      | Integration |         BB/ eq partitioning (per i test con bad parameters), WB/ statement coverage[^1]         |
|            GET /users - Get all Users            |     userRoutes,userDao,userController      | Integration |                                     Focus on the dependency                                     |
|  GET /users/roles/:role - Get all Users by Role  |     userRoutes,userDao,userController      | Integration |                                     Focus on the dependency                                     |
| GET /users/:username - Get an User by Username˙  |     userRoutes,userDao,userController      | Integration |                                     Focus on the dependency                                     |
|     DELETE /users/:username - Delete an User     |     userRoutes,userDao,userController      | Integration |                                     Focus on the dependency                                     |
|   DELETE /users - Delete every non-Admin User    |     userRoutes,userDao,userController      | Integration |                                     Focus on the dependency                                     |
| PATCH /users/:username - Update User information |     userRoutes,userDao,userController      | Integration |          BB/ eq partitioning (per i  test con bad parameters), Focus on the dependency          |
|              POST /sessions - Login              |                    auth                    |    Unit     |          WB/ statement coverage, BB/ eq partitioning (per i  test con bad parameters)           |
|        DELETE /sessions/current - Logout         |                    auth                    |    Unit     |                                     WB/ statement coverage                                      |
|     GET /sessions/current - Current Session      |                    auth                    |    Unit     |                                     WB/ statement coverage                                      |
|                  POST /products                  | productRoutes,productDao,productController | Integration | BB/ eq partitioning (per i  test con bad parameters), Focus on the dependency    ,BB/ boundary  |
|              PATCH /products/:model              | productRoutes,productDao,productController | Integration | BB/ eq partitioning (per i test con bad parameters), Focus on the dependency     ,BB/ boundary  |
|           PATCH /products/:model/sell            | productRoutes,productDao,productController | Integration | BB/ eq partitioning (per i  test con bad parameters), Focus on the dependency     ,BB/ boundary |
|                   GET /product                   | productRoutes,productDao,productController | Integration |          BB/ eq partitioning (per i test con bad parameters), Focus on the dependency           |
|             POST /products/available             | productRoutes,productDao,productController | Integration |          BB/ eq partitioning (per i test con bad parameters), Focus on the dependency           |
|             DELETE /products/:model              | productRoutes,productDao,productController | Integration |                                     Focus on the dependency                                     |
|                 DELETE /products                 | productRoutes,productDao,productController | Integration |                                     Focus on the dependency                                     |
|               POST /reviews/:model               |  reviewRoutes,reviewDao,reviewController   | Integration |                              BB/ boundary, Focus on the dependency                              |
|               GET /reviews/:model                |  reviewRoutes,reviewDao,reviewController   | Integration |                           Focus on the dependency,BB/ eq partitioning                           |
|              DELETE /reviews/:model              |  reviewRoutes,reviewDao,reviewController   | Integration |                                     Focus on the dependency                                     |
|                 DELETE /reviews                  |  reviewRoutes,reviewDao,reviewController   | Integration |                                     Focus on the dependency                                     |
|                    GET /carts                    |     cartRoutes,cartDao,cartController      | Integration |                                     Focus on the dependency                                     |
|                   POST /carts                    |     cartRoutes,cartDao,cartController      | Integration |                                     Focus on the dependency                                     |
|                   PATCH /carts                   |     cartRoutes,cartDao,cartController      | Integration |                                     Focus on the dependency                                     |
|                GET /carts/history                |     cartRoutes,cartDao,cartController      | Integration |                                     Focus on the dependency                                     |
|          DELETE /carts/products/:model           |     cartRoutes,cartDao,cartController      | Integration |                                     Focus on the dependency                                     |
|              DELETE /carts/current               |     cartRoutes,cartDao,cartController      | Integration |                                     Focus on the dependency                                     |
|                  DELETE /carts                   |     cartRoutes,cartDao,cartController      | Integration |                                     Focus on the dependency                                     |
|                  GET /carts/all                  |     cartRoutes,cartDao,cartController      | Integration |                                     Focus on the dependency                                     |
|            test routes create product            |               productRoutes                |    Unit     |                                     WB/ statement coverage                                      |
|            test routes change product            |               productRoutes                |    Unit     |                           WB/ statement coverage,BB/ eq partitioning                            |
|             test routes sell product             |               productRoutes                |    Unit     |                           WB/ statement coverage,BB/ eq partitioning                            |
|           test routes get all products           |               productRoutes                |    Unit     |                           WB/ statement coverage,BB/ eq partitioning                            |
|      test routes get all available products      |               productRoutes                |    Unit     |                           WB/ statement coverage,BB/ eq partitioning                            |
|         test routes delete all products          |               productRoutes                |    Unit     |                                     WB/ statement coverage                                      |
|           test routes delete a product           |               productRoutes                |    Unit     |                                     WB/ statement coverage                                      |
|         POST /users - Create a new User          |                 userRoutes                 |    Unit     |                           WB/ statement coverage,BB/ eq partitioning                            |
|            GET /users - Get all Users            |                 userRoutes                 |    Unit     |                                     WB/ statement coverage                                      |
|  GET /users/roles/:role - Get all Users by Role  |                 userRoutes                 |    Unit     |                           WB/ statement coverage,BB/ eq partitioning                            |
|  GET /users/:username - Get an User by Username  |                 userRoutes                 |    Unit     |                           WB/ statement coverage,BB/ eq partitioning                            |
|     DELETE /users/:username - Delete an User     |                 userRoutes                 |    Unit     |                           WB/ statement coverage,BB/ eq partitioning                            |
|   DELETE /users - Delete every non-Admin User    |                 userRoutes                 |    Unit     |                                     WB/ statement coverage                                      |
| PATCH /users/:username - Update User information |                 userRoutes                 |    Unit     |                           WB/ statement coverage,BB/ eq partitioning                            |
|              POST /sessions - Login              |                    auth                    |    Unit     |                                     WB/ statement coverage                                      |
|        DELETE /sessions/current - Logout         |                    auth                    |    Unit     |                                     WB/ statement coverage                                      |
|     GET /sessions/current - Current Session      |                    auth                    |    Unit     |                                     WB/ statement coverage                                      |
|                    GET /carts                    |                 cartRoutes                 |    Unit     |                                     WB/ statement coverage                                      |
|                   POST /carts                    |                 cartRoutes                 |    Unit     |                           WB/ statement coverage,BB/ eq partitioning                            |
|                   PATCH /carts                   |                 cartRoutes                 |    Unit     |                                     WB/ statement coverage                                      |
|                   GET /history                   |                 cartRoutes                 |    Unit     |                                     WB/ statement coverage                                      ||                                                  |                                   |             |                |
|             DELETE /products/:model              |                 cartRoutes                 |    Unit     |                                     WB/ statement coverage                                      |
|                 DELETE /current                  |                 cartRoutes                 |    Unit     |                                     WB/ statement coverage                                      |
|                     DELETE /                     |                 cartRoutes                 |    Unit     |                                     WB/ statement coverage                                      |
|                     GET /all                     |                 cartRoutes                 |    Unit     |                                     WB/ statement coverage                                      |
|                getUserCurrentCart                |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      ||                                                  |                                   |             |                |
|             Add product to user cart             |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      |
|           check Product exists In cart           |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      |
|                 getCurrentIdCart                 |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      |
|                   create Cart                    |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      |
|            getQuantityOfProductInCart            |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      |
|         Update Quantity Product In Cart          |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      |
|               Update Total In Cart               |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      |
|                  getCartHistory                  |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      |
|             remove product from cart             |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      |
|                  deleteAllCarts                  |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      |
|                    getAllCart                    |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      |
|                    getCartId                     |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      |
|               checkProductQuantity               |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      |
|                    run query                     |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      |
|                    get query                     |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      |
|                   fillProducts                   |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      |
|                    clearCart                     |                  cartDao                   |    Unit     |                                      WB/ decision coverage                                      |
|             add review to a product              |                reviewRoutes                |    Unit     |                                     WB/ statement coverage                                      |
|                Retrive a product                 |                reviewRoutes                |    Unit     |                                     WB/ statement coverage                                      |
|            delete a review of product            |                reviewRoutes                |    Unit     |                                     WB/ statement coverage                                      |
|         delete all reviews of a product          |                reviewRoutes                |    Unit     |                                     WB/ statement coverage                                      |
|                 delete a product                 |                reviewRoutes                |    Unit     |                                     WB/ statement coverage                                      |
|                     getCart                      |               cartController               |    Unit     |                                     WB/ statement coverage                                      |
|                    AddToCart                     |               cartController               |    Unit     |                                     WB/ statement coverage                                      |
|                  checkout cart                   |               cartController               |    Unit     |                                     WB/ statement coverage                                      |
|                 Get cart history                 |               cartController               |    Unit     |                                     WB/ statement coverage                                      |
|             Remove Product From Cart             |               cartController               |    Unit     |                                      WB/ decision coverage                                      |
|                    clear Cart                    |               cartController               |    Unit     |                                     WB/ statement coverage                                      |
|                  get all carts                   |               cartController               |    Unit     |                                     WB/ statement coverage                                      |
|                 delete all carts                 |               cartController               |    Unit     |                                     WB/ statement coverage                                      |
|                   Create User                    |               userController               |    Unit     |                                     WB/ statement coverage                                      |
|                  Get all users                   |               userController               |    Unit     |                                     WB/ statement coverage                                      |
|                Get users by Role                 |               userController               |    Unit     |                                     WB/ statement coverage                                      |
|              Get users by Username               |               userController               |    Unit     |                                     WB/ statement coverage                                      |
|             Delete User by Username              |               userController               |    Unit     |                                      WB/ decision coverage                                      |
|            Delete all non-admin Users            |               userController               |    Unit     |                                     WB/ statement coverage                                      |
|             Update user information              |               userController               |    Unit     |                                      WB/ decision coverage                                      |
|                 Register Product                 |             productController              |    Unit     |                                     WB/ statement coverage                                      |
|             Change Product Quantity              |             productController              |    Unit     |                           WB/ statement coverage,BB/ eq partitioning                            |
|                   Sell Product                   |             productController              |    Unit     |                           WB/ statement coverage,BB/ eq partitioning                            |
|                   get Products                   |             productController              |    Unit     |                           WB/ statement coverage,BB/ eq partitioning                            |
|              get Avaliable Products              |             productController              |    Unit     |                           WB/ statement coverage,BB/ eq partitioning                            |
|                DeleteAllProducts                 |             productController              |    Unit     |                           WB/ statement coverage,BB/ eq partitioning                            |
|                  create Product                  |                 productDao                 |    Unit     |                                     WB/ statement coverage                                      |
|               get Product by model               |                 productDao                 |    Unit     |                                     WB/ statement coverage                                      |
|             get Product by category              |                 productDao                 |    Unit     |                                     WB/ statement coverage                                      |
|                 get All Product                  |                 productDao                 |    Unit     |                                     WB/ statement coverage                                      |
|            check model exists Product            |                 productDao                 |    Unit     |                                     WB/ statement coverage                                      |
|         update product quantity Product          |                 productDao                 |    Unit     |                                     WB/ statement coverage                                      |
|         delete product by model Product          |                 productDao                 |    Unit     |                                     WB/ statement coverage                                      |
|           delete all products Product            |                 productDao                 |    Unit     |                                     WB/ statement coverage                                      |
|          Check if User is authenticated          |                  userDao                   |    Unit     |                                     WB/ statement coverage                                      |
|                   Create User                    |                  userDao                   |    Unit     |                                     WB/ statement coverage                                      |
|                    Get Users                     |                  userDao                   |    Unit     |                                     WB/ statement coverage                                      |
|                Get Users by Role                 |                  userDao                   |    Unit     |                                     WB/ statement coverage                                      |
|              Get Users by Username               |                  userDao                   |    Unit     |                                     WB/ statement coverage                                      |
|                   Delete User                    |                  userDao                   |    Unit     |                                     WB/ statement coverage                                      |
|                    Delete All                    |                  userDao                   |    Unit     |                                     WB/ statement coverage                                      |
|                 Update User info                 |                  userDao                   |    Unit     |                                     WB/ statement coverage                                      |
|          function: addReviewController           |              reviewController              |    Unit     |                                     WB/ statement coverage                                      |
|           function: getProductReviews            |              reviewController              |    Unit     |                                     WB/ statement coverage                                      |
|              function: deleteReview              |              reviewController              |    Unit     |                                     WB/ statement coverage                                      |
|         function: deleteReviewsOfProduct         |              reviewController              |    Unit     |                                     WB/ statement coverage                                      |
|            function: deleteAllReviews            |              reviewController              |    Unit     |                                     WB/ statement coverage                                      |
|                  Insert Review                   |                 reviewDao                  |    Unit     |                                     WB/ statement coverage                                      |
|                  get-All-Review                  |                 reviewDao                  |    Unit     |                                     WB/ statement coverage                                      |
|                  delete Review                   |                 reviewDao                  |    Unit     |                                     WB/ statement coverage                                      |
|             delete Review of product             |                 reviewDao                  |    Unit     |                                     WB/ statement coverage                                      |
|                delete all reviews                |                 reviewDao                  |    Unit     |                                     WB/ statement coverage                                      |

# Coverage

## Coverage of FR

<Report in the following table the coverage of functional requirements and scenarios(from official requirements) >

## Functional Requirements Coverage

| Functional Requirement or scenario                        | Test(s)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| --------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **FR1.1**                                                 | **AuthIntegration:** `describe("POST /sessions - Login"),</br> - test("As Customer")`</br> -`test("As Manager")`</br> -`test("As Admin")`</br> - `test("As a non-existing User")`,</br> - `test("With wrong password")` </br> **AuthRoutes**: `describe("POST /sessions - Login")`</br> - `test("Successfully")`</br> -`test("Unsuccessfully")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **FR1.2**                                                 | **AuthIntegration:** `describe("DELETE /sessions/current - Logout")`</br> - `test("As logged in User")`</br> -`test("As not logged in User")`</br> **AuthRoutes:** `describe("DELETE /sessions/current - Logout")`</br> - `test("As logged in User")`</br> -`test("As not logged in User")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **FR1.3**                                                 | **AuthIntegration:** `describe("GET /sessions/current - Current Session")`</br> - test("As logged in User"),</br> -test("As not logged in User")</br> **AuthRoutes:** `describe("GET /sessions/current - Current Session")`</br> - `test("As logged in User")`</br> -`test("As not logged in User")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **FR2.1 Show the list of all users**                      | **UserRoutes:** `describe("GET /users - Get all Users")"`</br> - `test("As Admin")`,</br> -`test("As not Admin")`,</br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                                                           | **UserController:** `describe("Get all users")`</br> - ` test("Empty list")`,</br> -`test("As Customer")`,</br> -`test("As Manager")` <br/> , </br> -`test("As not authenticated")` <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                                                           | **UserDao:** `describe("Get Users")`</br> - `test("Empty list")`,</br> -` test("Populated list")`,</br> -`test("It should return a 400 Date error code")` <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|                                                           | **UserIntegration:** ` describe("GET /users - Get all Users")`</br> - `test("As Admin")`,</br> -`test("As Customer")`,</br> -`test("As Manager")` <br/> , </br> -`test("As not authenticated")` <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **FR2.2 Show the list of all users with a specific role** | **UserRoutes:**<br>` describe("GET /users/roles/:role - Get all Users by Role")`<br>- `test("As Admin")`<br>- `test("As not Admin")`<br>-`test("Bad role")`<br>**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|                                                           | **UserController:**<br>`describe("Get users by Role")`<br>- `test("It should return customers")`<br>- `test("Integration: It should return a 200 success code and add a product")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|                                                           | **UserDao:**<br>`describe("Get Users by Role")`<br>- `test("Empty list")`<br>- `test("Populated list")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|                                                           | **UserIntegration:**<br>`describe("GET /users/roles/:role - Get all Users by Role")`<br>- `test("As Admin - Customer Role")`<br>- `test("As Customer")`<br> <br>- `test("As Manager")` <br>- ` test("As not authenticated")` <br>- `test("As Admin - invalid Role")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **FR2.3 Show the information of a single user**           | **UserRoutes:**<br>`describe("GET /users/:username - Get an User by Username")`<br>- ` test("As logged in User")`<br>- `test("As not logged in User")`<br>  - `test("Non-existing User")`<br> - `test("Not same User nor Admin")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|                                                           | **UserController:**<br>`describe("Get users by Username")`<br>- `describe("Get users by Username")`<br>- `test("User is not self nor Admin")`<br> - `test("User not found"`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|                                                           | **UserDao:**<br>`describe("Get Users by Username")`<br>- `test("Not found")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|                                                           | **UserIntegration:**<br>`describe("GET /users/:username - Get an User by Username"`<br>- `test("As logged in User")`<br>- `test("As not logged in User")`<br>   - ` test("Non-existing User")`<br>  - ` test("Not same User nor Admin")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **FR2.4 Update the information of a single user**         | **UserRoutes:**<br>` describe("PATCH /users/:username - Update User information")`<br>- `test("As logged in User")`<br>- `test("As not logged in User"`<br>                 - ` test("Not same User nor Admin")`<br> - ` test("To-be-updated User is Admin")`<br>   - ` test("With bad date")`<br>       - ` test("With no date")`<br>   - ` test("Bad parameters")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                                                           | **UserController:**<br>`describe("Update user information",)`<br>- `test("User is self")`<br>- ` test("User is not self")`<br>          - `  test("User is Admin updating Customer info")`<br>      - ` test("User is Admin updating Manager info")`<br>      - ` test("User is Admin updating Admin info"`<br>      - ` test("User is Admin updating non-existing User info")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|                                                           | **UserDao:**<br>`describe("Update User info")`<br>- `test("User found")`<br>- `test("User not found")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|                                                           | **UserIntegration:**<br>`describe("PATCH /users/:username - Update User information")`<br>- `test("As logged in User")`<br>- `test("As Admin for different User")`<br>    - `test("As Admin for self")`<br>    - `test("As not logged in User")`<br>               - `test("Not same User nor Admin")`<br>          - `test("To-be-updated User is Admin")`<br>  - `test("With bad date")`<br>  - `test("With no date")`<br>  - `test("Bad parameters")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **FR2.5 Delete a single _non Admin_ user**                | **UserRoutes:**<br>`describe("DELETE /users/:username - Delete an User")`<br>- `test("As logged in User")`<br>- `test("As not logged in User")`<br>           - `test("Non-existing User")`<br> - `test("Not same User nor Admin")`<br>  - `test("To-be-deleted User is Admin")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|                                                           | **UserController:**<br>`describe("Delete User by Username")`<br>- `test("User is self")`<br>- ` test("User is not Admin")`<br>   - ` test("User is Admin deleting Customer")`<br>     - `test("User is Admin deleting Manager")`<br>  - ` test("User is Admin deleting Admin")`<br> - `test("User is Admin deleting non-existing User")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|                                                           | **UserDao:**<br>`describe("Delete User")`<br>- `test("Found")`<br>- `test("Not found")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|                                                           | **UserIntegration:**<br>-`describe("DELETE /users/:username - Delete an User")`<br>- `test("As Customer")`<br>- ` test("As Manager")`<br>  - ` test("As Admin")`<br> - ` test("As not logged in User")`<br>  - ` test("Non-existing User")`<br> - ` test("Not same User nor Admin")`<br> - `  test("To-be-deleted User is Admin")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **FR2.6 Delete all _non Admin_ users**                    | **UserRoutes:**<br>`describe("DELETE /users - Delete every non-Admin User")`<br>- `test("As Admin")`<br>- `test("As not Admin")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|                                                           | **UserController:**<br>`describe("Delete all non-admin Users")`<br>- `test("Successfully")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|                                                           | **UserDao:**<br>`describe("Delete All")`<br>- `test("Successfully")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                                                           | **UserIntegration:**<br>`describe("DELETE /users - Delete every non-Admin User")`<br>- `test("As Admin")`<br>- `test("As Customer")`<br> - ` test("As Manager")` <br> - ` test("As non authenticated User"")  `                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **FR3.1**                                                 | **ProductRoutes:** `describe("test routes create product")`</br> - `test("It should return a 200 success code")`,</br> -`test("It should return a 409 error code")`,</br> -`test("It should return a 400 Date error code")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|                                                           | **ProductDAO:** `describe("create Product")`</br> - `test("should create a product")`,</br> -`test("should return product already exists")`,</br> -`test("should return product generic error")`,</br> -`test("should return product generic error from update history")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                                                           | **ProductController:** `describe("Register Product")`</br> - `test("Register a Product")`,</br> -`test("Duplicate Product")`,</br> -`test("Product with no date")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|                                                           | **ProductIntegration:** `describe("POST /products")`</br> - `test("should return 200 success and create new product")`,</br> -`test("should return 409 error duplicate product")`,</br> -`test("should return 400 error invalid date after current date")`,</br> -`test("should return 422 error invalid date format")`,</br> -`test("should return 422 error sellingPrice <=0")`,</br> -`test("should return 422 error Category not in 'Smartphone',</br> -'Laptop',</br> -'Appliance'")`,</br> -`test("should return 422 error quantity<=0")`,</br> -`test("should return 422 error model not a string")`,</br> -`test("should return 401 error not authorized")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **FR3.2**                                                 | **ProductRoutes:** `describe("test routes change product")`</br> - `test("It should return a 200 success code")`,</br> -`test("It should return a 200 without date success code")`,</br> -`test("It should return a Date Error 400 code")`,</br> -`test("It should return a Date format error 422")`,</br> -`test("It should return a Controller Error")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                                                           | **ProductDAO:** `describe("update product quantity Product")`</br> - `test("should update product")`,</br> -`test("should return generic error")`,</br> -`test("should return generic error from update history")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|                                                           | **ProductController:** `describe("Change Product Quantity")`</br> - `test("With no date")`,</br> -`test("With valid date")`,</br> -`test("With invalid date")`,</br> -`test("With invalid Product")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|                                                           | **ProductIntegration:** `describe("PATCH /products/:model")`</br> - `test("should return 200 success and increase product quantity")`,</br> -`test("should return 404 error product not found")`,</br> -`test("should return 422 error quantity <=0")`,</br> -`test("should return 422 error changeDate format error")`,</br> -`test("should return 400 error changeDate before arrival date")`,</br> -`test("should return 409 error changeDate after current date")`,</br> -`test("should return 401 error not authorized")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **FR3.3**                                                 | **ProductRoutes:** `describe("test routes sell product")`</br> - `test("It should return a 200 success code")`,</br> -`test("It should return a 200 without date success code")`,</br> -`test("It should return a Date Error 400 code")`,</br> -`test("It should return a Date format error 422")`,</br> -`test("It should return a Controller Error")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                                                           | **ProductController:** `describe("Sell Product")`</br> - `test("With no date")`,</br> -`test("With valid date")`,</br> -`test("With invalid date")`,</br> -`test("With product quantity = 0")`,</br> -`test("With product quantity < sell quantity")`,</br> -`test("With invalid Product")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|                                                           | **ProductIntegration:** `describe("PATCH /products/:model/sell")`</br> - `test("should return 200 success and decrease product quantity")`,</br> -`test("should return 404 error product not found")`,</br> -`test("should return 422 error quantity <=0")`,</br> -`test("should return 409 error quantity of product = 0")`,</br> -`test("should return 409 error quantity of product < quantity sold")`,</br> -`test("should return 422 error changeDate format error")`,</br> -`test("should return 400 error changeDate before arrival date")`,</br> -`test("should return 409 error changeDate after current date")`,</br> -`test("should return 401 error not authorized")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **FR3.4**                                                 | **ProductRoutes:** `describe("test routes get all products")`</br> - `test("It should return a 200 success code without grouping")`,</br> -`test("It should return a 200 success code with grouping=model and model")`,</br> -`test("It should return a 200 success code with grouping=category and category")`,</br> -`test("It should return a 422 success code with grouping=category and both category and model specified")`,</br> -`test("It should return a Controller Error")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|                                                           | **ProductDAO:** `describe("get All Product")`</br> - `test("should return all products")`,</br> -`test("should return available products")`,</br> -`test("should return generic error")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                                                           | **ProductController:** `describe("get Products")`</br> - `test("grouping no specified")`,</br> -`test("grouping specified with model")`,</br> -`test("grouping specified with category")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                                                           | **ProductIntegration:** `describe("GET /products")`</br> - `test("should return 200 success and return all products")`,</br> -`test("should return 200 success and return products with model 'model'")`,</br> -`test("should return 200 success and return all products with category Laptop")`,</br> -`test("should return 422 error grouping null & category defined")`,</br> -`test("should return 422 error grouping null & model defined")`,</br> -`test("should return 422 error grouping defined & model null")`,</br> -`test("should return 422 error grouping defined & category null")`,</br> -`test("should return 422 error grouping=model & model null & category defined")`,</br> -`test("should return 422 error grouping=category & category null & model defined")`,</br> -`test("should return 404 error grouping=model & wrong model")`,</br> -`test("should return 422 error grouping=category & wrong model")`,</br> -`test("should return 422 error grouping=category & both category and model specified")`,</br> -`test("should return 422 error grouping=model & both category and model specified")`,</br> -`test("should return 401 error not authenticated")`                                          |
| **FR3.4.1**                                               | **ProductRoutes:** `describe("test routes get all available products")`</br> - `test("It should return a 200 success code without grouping")`,</br> -`test("It should return a 200 success code with grouping=model and model")`,</br> -`test("It should return a 200 success code with grouping=category and category")`,</br> -`test("It should return a 422 success code with grouping=category and both category and model specified")`,</br> -`test("It should return a Controller Error")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|                                                           | **ProductDAO:** `describe("get Product by category")`</br> - `test("should return products by category")`,</br> -`test("should return products by available category")`,</br> -`test("should return generic error")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|                                                           | **ProductController:** `describe("get Available Products")`</br> - `test("grouping no specified")`,</br> -`test("grouping specified with model")`,</br> -`test("grouping specified with category")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|                                                           | **ProductIntegration:** `describe("POST /products/available")`</br> - `test("should return 200 success and return all available products")`,</br> -`test("should return 200 success and return available products with model 'model'")`,</br> -`test("should return 200 success and return all available products with category Laptop")`,</br> -`test("should return 422 error grouping null & category defined")`,</br> -`test("should return 422 error grouping null & model defined")`,</br> -`test("should return 422 error grouping defined & model null")`,</br> -`test("should return 422 error grouping defined & category null")`,</br> -`test("should return 422 error grouping=model & model null & category defined")`,</br> -`test("should return 422 error grouping=category & category null & model defined")`,</br> -`test("should return 404 error grouping=model & wrong model")`,</br> -`test("should return 422 error grouping=category & wrong model")`,</br> -`test("should return 422 error grouping=category & both category and model specified")`,</br> -`test("should return 422 error grouping=model & both category and model specified")`,</br> -`test("should return 401 error not authenticated")` |
| **FR3.5**                                                 | **ProductDAO:** `describe("check model exists Product")`</br> - `test("should check existence")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **FR3.6**                                                 | **ProductRoutes:** `describe("test routes delete all products")`</br> - `test("It should return a 200 success delete")`,</br> -`test("It should return a Controller error delete")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|                                                           | **ProductDAO:** `describe("delete all products Product")`</br> - `test("should delete a product")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|                                                           | **ProductController:** `describe("DeleteAllProducts")`</br> - `test("should delete all products")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|                                                           | **ProductIntegration:** `describe("DELETE /products")`</br> - `test("should return 200 success and delete all products")`,</br> -`test("should return 401 error not authorized")`,</br> -`test("should return 401 error not authenticated")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **FR3.7**                                                 | **ProductRoutes:** `describe("test routes delete a product")`</br> - `test("It should return a 200 success delete")`,</br> -`test("It should return a Controller error delete")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|                                                           | **ProductDAO:** `describe("delete product by model Product")`</br> - `test("should delete a product")`,</br> -`test("should return generic error")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|                                                           | **ProductController:** `describe("DeleteAllProducts")`</br> - `test("should delete a products")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|                                                           | **ProductIntegration:** `describe("DELETE /products/:model")`</br> - `test("should return 200 success and delete a product")`,</br> -`test("should return 404 error product not found")`,</br> -`test("should return 401 error not authorized")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **FR4.1**                                                 | **ReviewRoutes:**<br>`describe("add review to a product")`<br>- `test("function: add a review")`</br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **FR4.1**                                                 | **ReviewController:** `describe("addReview")`</br> - `test("Case: Product exists, review Added correctly")`</br> - `test("Case: Product not exists, review not added")`</br> - `test("Case: Product exists, review not added correctly")`</br> - `test("Case: Product not exists, review not added correctly")`</br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **FR4.1**                                                 | **ReviewDAO:** `describe("Insert Review")`</br> - `test("insertReview")`</br> - `test("insertReviewJustAdded")`  </br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **FR4.1**                                                 | **IntegrationReview:** `describe("POST /reviews/:model")`</br> - `test("should return 200 success and create new review")`</br> - `test("should return 404 error for non-existent product")`</br> - `test("should return 409 error for existing review by the same customer")`</br> - `test("should return 422 score is > 5")` </br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **FR4.2**                                                 | **ReviewRoutes:**<br>`describe("Retrieve a product")`<br>- `test("retrieve all reviews of a product")`</br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **FR4.2**                                                 | **ReviewController:** `describe("getProductReviews")`</br> - `test("Case: allReviewRetrieved")` </br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **FR4.2**                                                 | **ReviewDAO:** `describe("get-All-Review")`</br> - `test("product-found")` </br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **FR4.2**                                                 | **IntegrationReview:** `describe("GET /reviews/:model")`</br> - `test("should return 200 success and retrieve reviews for a product")`</br>- `test("should return 200 but it does not find products")` </br>- `test("should return 401 error if not authenticated")`</br>- `test("should return 422 because model not exists")` </br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **FR4.3**                                                 | **ReviewRoutes:**<br>`describe("delete a review of product")`<br>- `test("delete a review of a product")`</br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **FR4.3**                                                 | **ReviewController:** `describe("deleteReview")`</br> - `test("Case: the product exists, the user has the review")`</br> - `test("Case: the product not exists, the user has the review")`</br> - `test("Case: the product exists, the user hasn't the review")`</br> - `test("Case: the product not exists, the user hasn't the review")` </br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **FR4.3**                                                 | **ReviewDAO:** `describe("deleteReview")`</br> - `test("delete Review")`</br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **FR4.3**                                                 | **IntegrationReview:** `describe(""DELETE /reviews/:model")`</br> - `test("should return 200 success and delete a review")`</br> - `test("should return 404 error for review not found")`</br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **FR4.4**                                                 | **ReviewRoutes:**<br>`describe("delete all reviews of a product")`<br>- `test("delete all reviews of a product")`</br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **FR4.4**                                                 | **ReviewController:** `describe("deleteReviewsOfProduct")`</br> - `test("Case: the product exists")`</br> - `test("Case: the product not exists")`</br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **FR4.4**                                                 | **ReviewDAO:** `describe("delete Review of product")`</br> - `test("delete Review of product")`</br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **FR4.4**                                                 | **IntegrationReview:** `describe("DELETE /reviews/:model")`</br> - `test("should return 200 success and delete a review")`</br> - `test("should return 404 error for review not found")` </br> - `test("should return 401 Unauthorized (manager)")`</br> - `test("should return 401 Unauthorized (admin)")`</br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **FR4.5**                                                 | **ReviewRoutes:**<br>`describe("delete all reviews")`<br>- `test("delete all reviews")`</br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **FR4.5**                                                 | **ReviewController:** `describe("deleteAllReviews")`</br> - `test("deleteAllReviews")`</br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **FR4.5**                                                 | **ReviewDAO:** `describe("delete all reviews")`</br> - `test("delete all reviews")`</br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **FR4.5**                                                 | **IntegrationReview:** `describe("DELETE /reviews")`</br> - `test("should return 200 success and delete all reviews of all products (admin)")`</br> - `test("should return 200 success and delete all reviews of all products (manager)")`</br> - `test("should return 401 Unauthorized (customer)")`</br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **FR5.1**                                                 | **CartRoutes:**<br>`describe("GET /carts")`<br>- `test("should return the cart with status 200")`<br>- `test("Integration: It should return a 200 success code and retrive the all product of the cart")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                                                           | **CartController:**<br>`describe("getCart")`<br>- `test("getProduct success")`<br>- `test("getProduct error")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|                                                           | **CartDAO:**<br>`describe("getUserCurrentCart")`<br>- `test("user does not have a cart")`<br>- `test("user have a cart")`<br>- `test("user have a cart with no products")`<br>- `test("Database Error")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                                                           | **ProductIntegration** </br> `describe("GET /carts")`</br> `test("It should return a 200 success code and retrive the all product of the cart" )`</br>- `test("It should return a 200 success code and retrive the all product of the cart - Add one product to the cart" )`</br>- `test("It should return a 200 success code and retrive the all product of the cart - Add more product and more quantity to the cart" )`</br>- `test("It should return a 401 error code: admin" )`</br>- `test("It should return a 401 error code: manager" )`</br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **FR5.2**                                                 | **CartRoutes:**<br>`describe("POST /carts")`<br>- `test("should return the cart with status 200")`<br>- `test("Integration: It should return a 200 success code and add a product", async () => )`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|                                                           | **CartController:**<br>`describe("AddToCart")`<br>- `test("addToCart: Product not in database")`<br>- `test("addToCart success")`<br>- `test("addToCart create cart")`<br>- `test("addToCart empty stock")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|                                                           | **CartDAO:**<br>`describe("Add product to user cart")`<br>- `test("add product success")`<br>- `test("add product Error")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|                                                           | **ProductIntegration** </br>`describe("POST /carts")`</br>      `test("It should return a 200 success code and add a product" )`</br>- `test("It should return a 404 success code and not insert the cart") `</br>- `test("It should return a 409 code and not insert the cart" )`</br>- `test("It should return a 422 success code and not insert the cart" )`</br>- `test("It should return a 422 success code and not insert the cart space" )`</br>- `test("It should return a 401 error code: admin" )`</br>- `test("It should return a 401 error code: manager" )`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **FR5.3**                                                 | **CartRoutes:**<br>`describe("PATCH /carts")`<br>- `test("should return the cart with status 200")`<br>- `test("Integration: It should return a 200 success code and add pay the current cart", async () => )`<br                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|                                                           | **CartController:**<br>`describe("checkout cart")`<br>- `test("checkout success")`<br>- `test("cart not found")`<br>- `test("empty cart")`<br>- `test("low product stock")`<br>- `test("empty product stock")`<br>- `test("get all Cart error")`<br                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|                                                           | **CartDAO:**<br>`describe("Update Total In Cart")`<br>- `test("quantity retrived")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|                                                           | **ProductIntegration** </br> `describe("PATCH /carts")`</br> `test("It should return a 200 success code and add pay the current cart" )`</br>`test("It should return a 200 success code and add pay the current cart case: more product in the cart" )`</br>`test("It should return a 404 error code" )`</br>`test("It should return a 400 error code" )`</br>`test("It should return a 409 error code" )`</br>`test("It should return a 409 error code quantityRequest > quantityStored" )`</br>`test("It should return a 401 error code: Admin" )`</br>`test("It should return a 401 error code: Admin" )`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **FR5.4**                                                 | **CartRoutes:**<br>`describe("GET /carts/history")`<br>- `test("should return the cart with status 200")`<br>- `test("Integration: It should return a 200 success code and retrive the history: case one cart paid", async () => )`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                                                           | **CartController:**<br>`describe("Get cart history")`<br>- `test("get Cart history success")`<br>- `test("get Cart history error")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                                                           | **CartDAO:**<br>`describe("getCartHistory")`<br>- `test("quantity retrived")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                                                           | **ProductIntegration** </br> `describe("GET /carts/history")`</br> `test("It should return a 200 success code and retrive the history: case one cart paid" )`</br>`test("It should return a 200 success code and retrive the history: case more than one cart paid" )`</br>`test("It should return a 401 error code: admin" )`</br>`test("It should return a 401 error code: manager" )`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **FR5.5**                                                 | **CartRoutes:**<br>`describe("DELETE /carts/products/:model")`<br>- `test("should return the cart with status 200")`<br>- `test("Integration: It should return a 200 success code and delete a product of the current cart: case one product in the cart", async () => )`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                                                           | **CartController:**<br>`describe("Remove Product From Cart")`<br>- `test("Remove product from cart success")`<br>- `test("Remove product from cart error")`<br>- `test("Remove product from cart error: ProductNotInCartError")`<br>- `test("Remove product from cart error: EmptyCartError first condition")`<br>- `test("Remove product from cart error: EmptyCartError second condition")`<br>- `test("Remove product from cart error: ProductNotFoundError")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|                                                           | **CartDAO:**<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|                                                           | **ProductIntegration** </br> `describe("GET /carts/history")`</br> `test("It should return a 200 success code and retrive the history: case one cart paid" )`</br>`test("It should return a 200 success code and retrive the history: case more than one cart paid" )`</br>`test("It should return a 401 error code: admin" )`</br>`test("It should return a 401 error code: manager" )`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **FR5.6**                                                 | **CartRoutes:**<br>`describe("DELETE /carts/current")`<br>- `test("should return the cart with status 200")`<br>- `test("Integration: It should return a 404 error code", async () => )`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|                                                           | **CartController:**<br>`describe("clear Cart")`<br>- `test("clear Cart success")`<br>- `test("clear cart Error")`<br>`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|                                                           | **CartDAO:**<br>`describe("clearCart")`<br>- `test("clear success")`<br>- `test("It should return a 404 error code if there is no unpaid cart for the user")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                                                           | **IntegrationCart:**<br>`describe("DELETE /carts/current")`<br>- `test("It should return a 404 error code")`<br>- `test("It should return a 401 success code: Admin")`<br>- `test("It should return a 401 success code: Manager")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **FR5.7**                                                 | **CartRoutes:**<br>`describe("GET /carts/all")`<br>- `test("should return the cart with status 200")`<br>- `test("Integration: It should return a 200 success code and retrive all the carts", async () => )`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|                                                           | **CartController:**<br>`describe("getAllCart")`<br>- `test("get all carts success")`<br>- `test("get all carts error")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|                                                           | **CartDAO:**<br>`describe("getAllCart")`<br>- `test("get all carts")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|                                                           | **IntegrationCart:**<br>`describe("DELETE /carts")`<br>- `test("It should return a 200 success code and retrive the history: case one cart paid")`<br>- `test("It should return a 401 error code: customer")`<br>- `test("It should return a 200 success code and retrive the history: case one cart paid")`<br><br>`describe("GET /carts/all")`<br>- `test("It should return a 200 success code and retrive all the carts")`<br>- `test("It should return a 401 error code: customer")`<br>- `test("It should return a 200 success code")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **FR5.8**                                                 | **CartRoutes:**<br>`describe("DELETE /carts")`<br>- `test("should return the cart with status 200")`<br>- `test("Integration: It should return a 200 success code and retrive the history: case one cart paid", async () => )`<br><br>**CartController:**<br>`describe("delete all carts")`<br>- `test("delete all Carts success")`<br>- `test("get all Cart error")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                                                           | **CartController:**<br>`describe("delete all carts")`<br>- `test("delete all Carts success")`<br>- `test("get all Cart error")`<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|                                                           | **CartDAO:**<br>`describe("deleteAllCarts")`<br>- `test("delete success")`<br>- `test("database error")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                                                           | **IntegrationCart:**<br>`describe("DELETE /carts")`<br>- `test("It should return a 200 success code and clear all carts")`<br>- `test("It should return a 401 error code: customer")`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |






## Coverage white box

Report here the screenshot of coverage values obtained with jest-- coverage
![CoverageScreenshot.png](CoverageScreenshot.png)

[^1] Si inseriscono più tecniche per indicare che all'interno del modulo describe sono stati utilizzati test differenti che usano le tecniche riportate
